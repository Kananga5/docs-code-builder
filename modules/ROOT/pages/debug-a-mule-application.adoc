= Debugging a Mule Application

include::reuse::partial$beta-banner.adoc[tag="anypoint-code-builder"] 

//LOGO (web, desktop, or both)
include::partial$acb-ide-logos.adoc[tags="both-ides"]

Debug your Mule application using the embedded debugger in Anypoint Code Builder: 

* Add one or more breakpoints to pause the execution of a flow at lines that you want to inspect or fix.
+
Breakpoints are markers that you add beside line numbers in a configuration XML file for a Mule application that you are developing.
* Inspect and fix issues at or near a breakpoint before resuming execution of the application.
* Redeploy (hot deploy) your running instance as you debug.

image::debugger-view.png["Elements of the debugger view"]

[calloutlist]
. *Start Debugging*: Starts an instance of a Mule application in debugging mode.
. *Debug Toolbar*: Navigate through breakpoints in your running Mule application.
+
image::debugger-toolbar.png[width=250]
+
[calloutlist]
//TODO: duke need description
.. *Continue*: TODO
+
Key command: F5
//TODO: duke fix description; asking Guillermo to explain
.. *Step Over*: If the line of code does not contain a Flow ref component `<flow-ref/>`, *Step Over* behaves the same as next, it takes `flowref` as a unit of process avoiding to stop until return to the current flow.
+
Key command: F10
//TODO: duke fix description; asking Guillermo to explain
.. *Step Into*: If the line of code does not contain a `flowref` it behaves the same as next but if it does the debugger enters the flow referenced.
+
Key command: F11
.. *Step Out*: The debugger exits the current flow and attempts to return to a previous flow. If the flow doesnâ€™t exist, the debugger behaves like *Continue*.
+
Key command: Shift+F11
.. *Restart*: Stops and restarts the application without packaging new dependencies, such as new connector dependencies in your `pom.xml` file.
+
Key command: Shift+Cmd+F5 (Mac) or Shift+Ctrl+F5 (Windows)
.. *Stop*: Stops the application. The next debugging session that you start packages the application with any new dependencies.
+
Key command: Shift+F5
. *Variables Panel*: Provides information about the Mule event and its variables.
. *Run and Debug*: Opens the *Run and Debug* menu, where you click *Start Debugging* and find  debugging information.
. *Watch Panel*: Helps you evaluate variables and expressions.
. *Call Stack Panel*: Identifies the functions or procedures that are currently in the stack.
. *Breakpoints Panel*: Lists all breakpoints in your Mule application. 
. *Terminal*: Displays output of the Maven build and the results of the deployment to the embedded Mule Runtime engine.
. *Breakpoint*: Identifies a line in the configuration XML to pause execution of the flow so that you can check for and fix issues.

Start by xref:debug-add-logger-set-variables.adoc[Adding Components to Help You Debug Your Application].

== Debugging Overview

The debugging process follows this pattern:

. Set breakpoints in the configuration XML of your application.
. Start the debugger:
.. Use the *Run and Debug* icon in the activity bar to open *Run and Debug* panel. 
.. Click *Start Debugging (F5)* icon to start the debugger.
. Start execution of a flow in your Mule application, for example, by triggering an HTTP listener or configuring a Scheduler component.
. When the execution stops at a breakpoint, debug as needed.
. After addressing an issue at a breakpoint, _hot deploy_ the application.
+
See <<hot-deploy>>.
. Execute your flow again, and continue debugging until you address all issues. 

[[hot-deploy]]
== Hot Deploy When Debugging

Hot deploy as you debug your application. A hot deployment updates a running instance of your application but does not package new dependencies, such as new connector dependencies in your `pom.xml`.

. Open the Command Palette by pressing Ctrl+Shift+p (Windows) or Cmd+Shift+p (Mac).
. Provide the following command:

[source,command]
----
MuleSoft: Rebuild Application
----

== Debug Your American Flights Implementation

To learn more about debugging, debug the American Flights implementation:

. xref:debug-add-logger-set-variables.adoc[]
. xref:debug-add-breakpoints.adoc[]
. xref:run-a-debug-session.adoc[]

If you have not implemented American Flights example yet, start from xref:design-api-specification.adoc[], and then proceed to xref:develop-integration.adoc[] followed by xref:implement-api-specification.adoc[].
