= Iteratively Design and Implement API Specs

include::reuse::partial$beta-banner.adoc[tag="anypoint-code-builder"] 

// local-api-specification-tutorial

//LOGO (web, desktop, or both)
include::partial$acb-ide-logos.adoc[tags="both-ides"]

include::partial$acb-reusable-steps.adoc[tags="in-progress"]


Using Anypoint Code Builder, you can scaffold an API specification into an interface project without first publishing it to Anypoint Exchange.
As you make changes, you sync changes in the interface project by re-scaffolding the spec.

For example, after adding a new endpoint to your API specification,
you can re-scaffold to add a new flow for that endpoint to the configuration XML file.

Implementing a local API enables you to reflect your changes to your API design directly into the Mule project that implements your API specification.

After the API specification and the related Mule project are synced, you can modify the API specification and implement changes simultaneously.


When you are ready, you can publish your API specification to Exchange and deploy your Mule project.

== Overview of the Scaffolding Process

When you scaffold an API, Anypoint Code Builder creates a _multi-root workspace_ in VS Code with both the API specification and interface project and keeps them synchronized.


By iterating between the API design and implementation tasks you can speed up the development process.


When you scaffold your API specification into a new interface project,
Anypoint Code Builder creates a configuration XML for your implementation.

Local projects reside in the Anypoint Code Builder IDE, whether the projects are in your desktop IDE or in the cloud IDE associated with your user account in Anypoint Platform.

. You define an API in a specification file.
. You scaffold the API by implementing the local API.
. The scaffolding process creates the interface XML file in a Mule project.

Iterative API design and implementation within the IDE takes place in a _multi-root workspace_ in VS Code.
To map project folders for your API specification and implementation projects into a multi-root workspace, VS Code uses a file with the extension `.code-workspace`.
For your projects to work properly, this file _must not reside within_ either project folder.
In addition, Anypoint Code Builder permits only one pair of iterative design and implementation project folders per multi-root workspace.

The procedures for creating the specification and implementation projects are designed to meet these requirements. For information in the VS Code documentation, see https://code.visualstudio.com/docs/editor/multi-root-workspaces[Multi-root Workspaces^].


== Before You Begin 

* xref:setup.adoc[Set up and access the web or desktop IDE].
* xref:des-create-api-specs.adoc[Create and test your API specification].
// or import from Design Center?


== Scaffold an API Spec into a New Interface Project

To scaffold the current API spec into a new interface project:

. Click the image:icon-implement-api.png["",15,15] (*Implement this local API*) icon in the activity bar:
+
image::imp-local-api.png[Implement this local API icon in the activity bar]
+
Alternatively, use the Command Palette:
+
// Pointer to Command Palette
include::partial$acb-reusable-steps.adoc[tags="open-command-palette"]
. Select the following command:
+
[source,command]
----
MuleSoft: Implement this Local API
----
+
Anypoint Code Builder creates a multi-root workspace with your API specification and Mule project. 
In the multi-root workspace, you can work with both your API specification and Mule project folders at the same time.
+
After the workspace is created, Anypoint Code Builder builds and packages the API specification and publishes it to a local Maven repository as a snapshot.
. Choose a location to store your workspace.
+
Your multi-root workspace is a `.code-workspace` file extension that keeps both of your directories coordinates.
+
[IMPORTANT]
--
Save your `.code-workspace` file on your home directory. Do not save it inside your API specification folder.
--
. Choose a project name for your Mule project.
. Choose a location for your Mule project.
. Code Builder scaffolds your current local API specification into a new Mule project.

You can now start iterating between your API specification and its related Mule project.

To close your multi-root workspace, see <<close-workspace>>. 


== Re-Scaffold the API Spec

After making changes to your API spec, re-scaffold the spec to update your Mule project:

. In the Explorer, navigate to the API spec file.
. Re-scaffold the API specification to update your Mule project:
// Pointer to Command Palette
include::partial$acb-reusable-steps.adoc[tags="open-command-palette"]
. Select the following command:
+
[source,command]
----
MuleSoft: Re-scaffold this local API
----
+
After receiving a message that your project *has been rescaffolded successfully*, navigate to your implementation XML file, and notice the new flow (`<flow name="get:\users\userbyid:design-an-api-config"/>`) for the `userbyid` endpoint:





[[close-workspace]]
== Close a Multi-Root Workspace

// Open the ACB IDE
include::partial$acb-reusable-steps.adoc[tags="open-ide"]
// Pointer to Command Palette
include::partial$acb-reusable-steps.adoc[tags="open-command-palette"]
. Select the following command:
+
[source,command]
----
Workspaces: Close Workspace
----

After closing, you can reopen a synchronized project from the workspace that you created when implementing the API.
See <<open-workspace>>.

[[open-workspace]]
== Open a Multi-Root Workspace

Open a multi-root workspace from the `.code-workspace` file, for the projects in the workspace. 

// Open the ACB IDE
include::partial$acb-reusable-steps.adoc[tags="open-ide"]
// Pointer to Command Palette
include::partial$acb-reusable-steps.adoc[tags="open-command-palette"]
. Select the following command:
+
[source,command]
----
File: Open Workspace from File...
----
. Navigate to and double-click the `.code-workspace` file for projects in the workspace.
+
The projects open in the Explorer view, and the heading for the multi-root-workspace appends a *(WORKSPACE)* identifier. For example:
+
image::tut-api-multiroot-workspace.png["A multi-root workspace in the Explorer"]


== See Also

* xref:local-api-specification-tutorial.adoc[]
