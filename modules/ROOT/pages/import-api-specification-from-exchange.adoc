= Importing an API from Exchange

include::reuse::partial$beta-banner.adoc[tag="anypoint-code-builder"]

You can import a published API specification from Exchange as a dependency in your project to later scaffold the necessary flows for each endpoint:

. In Anypoint Code Builder, open your `american-ws-anypoint-code-builder.xml` file.
. Open the Command Palette by pressing Ctrl+Shift+p (Windows) or Cmd+Shift+p (Mac), and provide the following command:
+
[source,command]
----
MuleSoft: Import Asset from Exchange
----
+
image::import-asset-exchange-implementation.png["Rest API option highlighted after selecting MuleSoft: Import Asset from Exchange"]
// TO-DO: This SS seems to be outdated. In desktop IDE available options are: "Rest API", "DataWeave Library", "GraphQL API", and "Connector".
. Type the type of asset you want to import:
* `_REST API_`.
+
image::rest-api-asset-type.png["Rest API option highlighted after selecting MuleSoft: Import Asset from Exchange"]
. Type the name of the API you want to import:
* `_American Flights API ACB_`.
// TO-DO: This SS seems to be outdated. In desktop IDE available options are: "Rest API", "DataWeave Library", "GraphQL API", and "Connector".
// TO-DO: No "American Flights API ACB" to choose.
+
image::select-api-asset-from-exchange.png["American Flights API asset is highlighted"]
// TO-DO: In desktop IDE the "Search for Asset" dialog window appears. The SS seems to be repeated.
. Select the version of the API you want to import:
* `_1.0.0_`
+
image::select-api-asset-version.png["American Flights API asset is highlighted"]
. Select *Yes* when prompted to scaffold the API dependency.
+
image::scaffold-option-yes.png["Yes option highlighted when requesting scaffolding the API dependency"]
+
This step adds the API specification as a dependency in your project's `pom.xml` file and creates a new file called `american-flight-api-acb.xml`:
+
image::scafolded-mule-config-file.png["American-flights.xml file highlighted in the package explorer section"]
//TO-DO: The SS shows an image of american-flights.mxl instead of american-flights-api-acb-xml.

== Examine the XML File Created

Anypoint Code Builder displays the main flow scaffolded from your API specification.

image::scafolded-flow-canvas.png["The main flow is highlighted"]

Open the `american-flight-api-acb.xml` file and locate the flows created for these endpoints:
//TO-DO: Verify the name of the file. It seems to be called "american-ws-anypoint-code-builder.xml" now.

* `get:\flights`
* `post:\flight`
* `get:\flights{ID}`:

[source,xml,linenums]
--
<flow name="get:\flights:american-flight-api-config">
</flow>

<flow name="post:\flights:application\json:american-flight-api-config">
</flow>

<flow name="get:\flights\(ID):application\json:american-flight-api-config">
</flow>
--

Additionally, you can use the *Flow List* panel to navigate through flows:

. Select the *Flow List* panel to expand it.
+
image::outline-list-location.png["Flow list panel highlighted"]
. Select the flow to which you want to navigate.
+
image::outline-list-select-flow.png["American-flights-api-main flow highlighted"]
// TO-DO: Double check this SS. It may not be a good guide for the reader.
+
Selecting a flow from the flow list highlights that same flow in your Mule configuration file.

Anypoint Code Builder creates other automatically generated components related to error handling:

[source,xml]
--
<apikit:router config-ref="american-flights-api-config" />
<error-handler>
    <on-error-propagate type="APIKIT:BAD_REQUEST">

    </on-error-propagate>
    <on-error-propagate type="APIKIT:NOT_FOUND">

    </on-error-propagate>
    <on-error-propagate type="APIKIT:METHOD_NOT_ALLOWED">

    </on-error-propagate>
    <on-error-propagate type="APIKIT:NOT_ACCEPTABLE">

    </on-error-propagate>
    <on-error-propagate type="APIKIT:UNSUPPORTED_MEDIA_TYPE">

    </on-error-propagate>
    <on-error-propagate type="APIKIT:NOT_IMPLEMENTED">

    </on-error-propagate>
</error-handler>
--

== Next Step

* xref:implement-api-interface-logic.adoc[Implement the API Interface Logic]. +
Build over your API and define your flow logic to handle requests to your implemented API back to your database integration.
