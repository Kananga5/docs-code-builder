= Deploying Mule Apps to CloudHub

include::reuse::partial$beta-banner.adoc[tag="anypoint-code-builder"]

You can use Anypoint Code Builder to deploy your Mule application to CloudHub.

[NOTE]
--
Anypoint Code Builder can only deploy applications to CloudHub 1.0
--

== Before You Begin

* xref:setup.adoc[Set up and access the web or desktop IDE].
* xref:int-create-integrations.adoc[Create an integration].
* Install a REST client such as Postman or AdvancedRestClient

== Deploy an Application to CloudHub

To deploy to CloudHub you must configure a `deploy.json` file in your `src/main/resources` directory. If your project does not have a `deploy.json` file, Anypoint Code Builder prompts you to create one the first time you deploy your application:

. Open Anypoint Code Builder.
// Pointer to Command Palette
include::partial$acb-reusable-steps.adoc[tags="open-command-palette"]
. Enter `deploy` and select the following command:
+
[source,command]
--
MuleSoft: Deploy to CloudHub
--
+
image::deploy-to-cloudhub.png[]
. Anypoint Code Builder prompts that a deployment configuration file has been created and opens it for you to review:
+
[source,json]
--
{
  "runtime": "4.4.0",
  "workerSize": 0.1,
  "applicationName": "american-ws-anypoint-code-builder", //<1>
  "workers": 1,
  "autoStart": true
}
--
[calloutlist]
.. The `applicationName` property defines part of the URL that you use to access your application on CloudHub. +
The name must be unique across all applications deployed to CloudHub.
. After reviewing the deployment configuration, select *Deploy* to deploy the application to CloudHub.
+
image::deploy-config-created.png[Deployment configuration file created pop-up message]
. Select your preferred environment.
+
image::select-deployment-environment.png[]
+
Anypoint Code Builder packages the application and deploys it to CloudHub.
. After deployment completes, select *Open in Runtime Manager*.
. Select your application from the list applications.
. Note the domain name for your application: +american-ws-anypoint-code-builder.eu-s1.cloudhub.io+.
. Open your preferred REST client and make a `GET` request to +http://american-ws-anypoint-code-builder.eu-s1.cloudhub.io/api/flights+.



////
// Pointer to Command Palette
include::partial$acb-reusable-steps.adoc[tags="open-command-palette"]
. Enter `deploy` and select the following command:
+
[source,command]
--
MuleSoft: Deploy to CloudHub
--

// +
// TODO: cc: I don't think we need this screenshot.
// image::deploy-to-cloudhub.png[]
. Anypoint Code Builder prompts that a deployment configuration file has been created and opens it for you to review:
+
[source,json]
--
{
  "runtime": "4.4.0",
  "workerSize": 0.1,
  "applicationName": "mock-dw-library", //<1>
  "workers": 1,
  "autoStart": true
}
--
[calloutlist]
.. The `applicationName` property defines the part of the URL that you use to access your application on CloudHub. +
The name must be unique across all applications deployed to CloudHub.
. After reviewing the deployment configuration, select *Deploy* to deploy the application to CloudHub.
// +
// TODO: cc: I don't think we need this screenshot.
// image::deploy-config-created.png[Deployment configuration file created pop-up message]
. Select your preferred environment.
+
// TODO: cc: I don't think we need this screenshot.
// image::select-deployment-environment.png[]
// +
Anypoint Code Builder packages the application and deploys it to CloudHub.
. After deployment completes, select *Open in Runtime Manager*.
. Select your application from the application list. +
The domain name of the application varies, but it follows a similar structure such as: `+mock-dw-library.eu-s1.cloudhub.io+`.
. Open your preferred REST client and make a `GET` request to the domain name as displayed in *Runtime Manager*.
. Your application now returns a random city every time you reach the endpoint.
////