sync your= Controlling Source Files
:page-deployment-options: cloud-ide, desktop-ide

include::reuse::partial$beta-banner.adoc[tag="anypoint-code-builder"] 

// Shared intro to SCM
include::anypoint-code-builder::partial$acb-reusable-steps.adoc[tag="scm-intro-best-practice"]
A useful SCM provides change history of each file and a branching methodology to maintain project quality, full traceability, the ability to restore earlier versions of your files, and a way to recover source code if your Anypoint Code Builder environment is lost or removed. 

GitHub and the Git command line interface (CLI) are widely used in the industry and supported  by VS Code out-of-the-box, with minimal configuration. The procedures on this page show how to set up and use GitHub for source control. VS Code extensions for other SCM systems are also available for you to set up and use. For information, see https://code.visualstudio.com/docs/sourcecontrol/overview#_scm-providers[SCM Providers^]. 

For more information, see https://code.visualstudio.com/docs/sourcecontrol/overview[Using Git source control in VS Code^] in the VS Code documentation.  For detailed information about Git, see the https://git-scm.com/book[Git documentation^].

[[prereqs]]
== Before You Begin

Ensure that these prerequisites are in place:

* A GitHub account
+
If you do not have an account create one from the https://github.com/join[Join GitHub^] page on the GitHub site.

* A Git installation on your computer 
+
If Git is not installed on your computer, follow the https://github.com/git-guides/install-git[Git installation instructions^] for your machine.

* Access to Anypoint Code Builder from the desktop or cloud IDE
+
For setup and installation information, see xref:start-acb.adoc[], and be sure to meet all prerequisites. 

* A project in Anypoint Code Builder
+
For example, to create an integration project, see xref:int-create-integrations.adoc[].

* A GitHub user name and email configuration (see <<config-git>>)

[[config-git]]
=== Configure Your Git Username and Password

Check for and configure your username and email properties so that you can add, update, and retrieve your project files from a remote Git repository in GitHub. 

. Meet the prerequisites in <<prereqs>>.
//open ACB terminal:
include::anypoint-code-builder::partial$acb-reusable-steps.adoc[tag="open-terminal"]
. From the Anypoint Code Builder terminal, check for any existing Git configuration by running this command:
+
[source,command]
----
git config --list
----

* If your GitHub `user.name` and `user.email` are not listed or if no data returns, configure the properties:

.. Run this command to set your `user.name`, replacing `YourUserName` with your GitHub username:
+
[source,command]
----
git config –-global user.name "YourUserName"
----
.. Run this command to set your `user.email`, replacing `your@email.com` with your GitHub email address:
+
[source,command]
----
git config –-global user.email "your@email.com"
----
+
If two-factor authentication is enabled on your GitHub account and you are prompted for a password, enter your personal access token instead of your GitHub login password. For more information, see GitHub documentation https://docs.github.com/en/authentication/securing-your-account-with-two-factor-authentication-2fa/accessing-github-using-two-factor-authentication[Access GitHub with 2FA^].

* If your GitHub `user.name` and `user.email` are listed, you are ready to use Git to control your project files from VS Code. For guidance with common source control tasks in VS Code, see: 

** <<create-repo>>
** <<add-remote>>
** <<sync-changes>>
** <<add-extra-remote>> 

[[create-repo]]
== Generate and Publish to a Repository in GitHub

If you do not have a repository for your project, you can use VS Code to generate and publish your project files to a repository in GitHub. If you already have an empty repository in GitHub that you intend to use for your project files, see <<add-remote>> to add the remote repository from VS Code. 

. Meet the prerequisites in <<prereqs>>.
//step: open the project folder
include::anypoint-code-builder::partial$acb-open-packaged-sources.adoc[tag="open-workspace-root"]
// Pointer to Source Control Panel
include::partial$acb-reusable-steps.adoc[tags="open-source-control-no-edits"]
. In the Source Control panel, click *Publish to GitHub*.
+
image::start-scm-repo.png["Publish repository to GitHub from VS Code"]
+
When no repository is associated with your project, VS Code provides options for initializing a repository (*Initialize Repository*) or directly publishing your project to a new repository in GitHub (*Publish to GitHub*).
. Provide a name for your repository in the field that opens, or use the default name that appears.
+
image::start-scm-repo-name.png["Name of new repository"]
+
The default repository name matches the project name.
. Select a repository type (private or public).
+
To protect data in your repository, select a private repository (*Publish to GitHub private repository*). This process commits and pushes your project files to your new repository.
. Select the files to publish to the repository.
+
You can select all or a subset of the files.
. To view your project files in a GitHub repository, click *Open on GitHub* in the popup. 
+
image::start-scm-repo-open-in-github.png["Opening repository in GitHub"]
+
Alternatively, open GitHub from your browser and locate your new repository.

[[add-remote]]
== Initialize and Sync Project Files with an Existing Repository

If you have an empty repository in GitHub to use for your project files, you can initialize your source files and connect to the repository from VS Code. This procedure assumes that the project files are ready to stage and publish to the repository and that you are not connected to another remote repository. 

If your project is already connected to a repository in an SCM, such as the Anypoint SCM, you can <<sync-changes, sync your changes with that repository>>, or you can publish your changes to a different repository by <<add-extra-remote, adding another remote>>.

. Meet the prerequisites in <<prereqs>>.
//step: open the project folder
include::anypoint-code-builder::partial$acb-open-packaged-sources.adoc[tag="open-workspace-root"]
// Pointer to Source Control Panel
include::partial$acb-reusable-steps.adoc[tags="open-source-control-no-edits"]
. In the Source Control panel, click *Initialize Repository*.
+
When no repository is associated with your project, VS Code provides options for initializing a repository (*Initialize Repository*) or directly publishing your project to a new repository in GitHub (*Publish to GitHub*).
// Pointer to Command Palette
include::partial$acb-reusable-steps.adoc[tags="open-command-palette"]
. Configure a connection from the project in VS Code to your repository in GitHub:

.. Provide the following command to add the remote repository on GitHub:
+
[source, command]
----
Git: Add Remote...
----
.. Select *Add Remote from GitHub* from the popup menu.
+
image::start-scm-oas-add-remote.png["Adding an remote repository from GitHub"]
.. Provide the URL to your git repository, for example:
+
image::start-scm-repo-add-remote-uri.png["Adding a remote repository URL from GitHub"]
.. Provide a name for the remote in VS Code, for example:
+
----
my-acb-project-repo
----
+
This name for the repository in VS Code can match or differ from the repository name in GitHub.
. From the Source Control panel, stage, commit, and publish your files to the repository in GitHub:

.. Stage your files by mousing over the *Changes* area (located after the *Commit* button) and clicking the image:icon-scm-add-changes.png["",15,15] (plus) icon.
+
image::start-scm-repo-stage-changes.png["Adding commit message for staged changes"]
+
Alternatively, you can stage a single file by clicking the plus icon for that file.
+
Staged files move from the *Changes* area in the Source Control panel to the *Staged Changes* area. The UI uses the `git add` command to add changes from your working directory to the staging area in your local Git repository for the IDE.
.. Provide your first commit message for the files before clicking *Commit*.
+
image::start-scm-repo-commit-staged.png["Commit message for staged changes"]   
.. Click *Publish Branch*.
+
image::start-scm-repo-publish-branch.png["Publish branch files in a repo on GitHub"]
.. Select a repository type (private or public).
+
To protect data in your repository, select the private version of your repository (*Publish to GitHub private repository*). This process commits and pushes your project files to your new repository.
. Open your repository in GitHub to review the published files, for example:
+
image::start-scm-repo-github.png["Project files in a repo on GitHub"]

[[sync-changes]]
== Sync Project File Changes with Your Repository 

After your project is connected and published to a remote repository in GitHub, you can use the IDE to sync your changes to files with that repository. If you do not have a repository for your project yet, see <<create-repo>>. If you haven't added your repository to your project yet, see <<add-remote>>.

Use the VS Code UI or its built-in terminal to sync your changes:

* <<sync-from-ui>>
* <<sync-from-terminal>>

[[sync-from-ui]]
=== Sync Changes from the Source Control Panel 

To sync changes to your files from your project's Source Control panel in VS Code:

//step: open the project folder
include::anypoint-code-builder::partial$acb-open-packaged-sources.adoc[tag="open-workspace-root"]
// Pointer to Source Control Panel
include::partial$acb-reusable-steps.adoc[tags="open-source-control"]
. In the Source Control panel:
.. Stage your changes.
+
You can stage files individually or as a group.
.. Provide a commit message.
.. Click *Commit* to commit the changes to your local branch on the IDE.
.. Click *Sync Changes* to push your changes to your remote repository on GitHub.

[[sync-from-terminal]]
=== Sync Changes from the Command Terminal

To sync changes to your files from your project's command terminal in VS Code:

//step: open the project folder
include::anypoint-code-builder::partial$acb-open-packaged-sources.adoc[tag="open-workspace-root"]
//open ACB terminal:
include::anypoint-code-builder::partial$acb-reusable-steps.adoc[tag="open-terminal"]
. At the prompt, run Git commands to add new files to your repository and to stage, commit, and push changes to your remote repository on GitHub.
+
The following example uses `git status` to check the status of changes, `git commit` to commit all changed files and add a commit message, and `git push` to merge the changes into the files on the remote repository.
+
----
$ git status
On branch main
Your branch is up to date with '011124-test-api-remote/main'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   011124-test-api.raml

no changes added to commit (use "git add" and/or "git commit -a")

$ git commit -am 'my commit message'
[main bccc296] another commit
 1 file changed, 1 deletion(-)
 
$ git push
Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 8 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 944 bytes | 944.00 KiB/s, done.
Total 3 (delta 2), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To https://github.com/me/my-repo.git
   e4156cc..bccc296  main -> main
----

For common Git commands, see https://docs.github.com/en/get-started/using-git/about-git[About Git^] in the GitHub documentation, or find all commands in the https://git-scm.com/docs[Git command reference^].

[[start-project-from-git]]
== Clone a Project Repository

After adding a project to a repository on GitHub, you can clone it into your desktop or cloud IDE. Cloning is helpful for retrieving a backup of a deleted project or for sharing your project in another Anypoint Code Builder IDE. For example, you can work on the same project in the desktop and cloud IDE if your project is stored in a Git repository. 

//open ACB terminal:
include::anypoint-code-builder::partial$acb-reusable-steps.adoc[tag="open-terminal"]
. Navigate to your home directory for Anypoint Code Builder. 
. Clone your GitHub repository into your new directory:
+
[source,command]
----
git clone https://github.com/_yourusername_/_yourrepo_.git
----
. Open the project folder in the IDE.

[[add-extra-remote]]
== Add an Extra Remote Repository

VS Code supports connections to more than one remote repository from your project workspace. This feature is helpful, for example, if you want to use your own repository for an API specification project that you imported from Design Center instead of using the Anypoint SCM or if you created your design project from the IDE before the February 2024 release. Both types of projects automatically add a connection to a remote Git repository in the Anypoint SCM. For more information, see xref:des-designing-api-specs.adoc#anypoint-scm[Source Control for API Design Projects].

This example assumes that you have an empty repository in GitHub. If you do not, you can create one from the GitHub. For guidance, see https://docs.github.com/en/repositories/creating-and-managing-repositories/quickstart-for-repositories[Quickstart for repositories^] in the GitHub documentation.  

. Meet the prerequisites in <<prereqs>>.
//step: open the project folder
include::anypoint-code-builder::partial$acb-open-packaged-sources.adoc[tag="open-workspace-root"]
// Pointer to Source Control Panel
include::partial$acb-reusable-steps.adoc[tags="open-source-control"]
. In the Source Control Panel, notice that there is a repository in the *Source Control Repositories* area of the panel, for example:
+
image::start-scm-oas-anypoint.png["Project source control using the Anypoint SCM"]
// Pointer to Command Palette
include::partial$acb-reusable-steps.adoc[tags="open-command-palette"]
. Configure a connection from the project in VS Code to your repository in GitHub:
.. Provide the following command to add the remote repository on GitHub:
+
[source, command]
----
Git: Add Remote...
----
.. Select *Add Remote from GitHub* from the popup menu.
+
image::start-scm-oas-add-remote.png["Adding an extra remote repository from GitHub"]
.. Provide the URL to your git repository, for example:
+
----
https://github.com/me/my-extra-repo.git
----
.. Provide a name for the remote in VS Code, for example:
+
----
my-extra-repo
----
+
This name for the repository in VS Code can match or differ from the repository name in GitHub.
. Publish your project to your extra remote repository:
.. In the command palette, provide the following command:
+
[source, command]
----
Git: Push to...
----
.. Select *Git: Push to...* from the popup menu.
+
image::start-scm-oas-push-to.png["Selecting 'Push to... from VS Code'"]
.. Select the extra remote repository that you added, for example:
+
image::start-scm-oas-publish-to-private-repo.png["Selecting the extra remote repository"]
. Check for your project source files in your repository on GitHub, for example:
+
image::start-scm-oas-in-github.png["Viewing project files in the extra remote repository"]

[[remove-remote]]
== Remove a Remote Repository from Your Project

To remove a remote repository from your project workspace:

//step: open the project folder
include::anypoint-code-builder::partial$acb-open-packaged-sources.adoc[tag="open-workspace-root"]
// Pointer to Source Control Panel
include::partial$acb-reusable-steps.adoc[tags="open-source-control"]
. In the Source Control panel:
.. Provide the following Git command to add the remote repository on GitHub:
+
[source, command]
----
Git: Remove Remote...
----
.. In the popup, select the remote repository that you want to remove.
+
In the IDE, your local Git repository remains because it was initialized before syncing with the remote.  

== See Also

* https://code.visualstudio.com/docs/sourcecontrol/intro-to-git[Introduction to Git in VS Code^] 