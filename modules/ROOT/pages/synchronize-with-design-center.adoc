= Syncing Changes with Design Center

include::reuse::partial$beta-banner.adoc[tag="anypoint-code-builder"] 

Anypoint Code Builder has integrated source control management (SCM) and includes Git support.

Use the integrated SCM in Anypoint Code Builder to sync your local API with Anypoint Design Center.

== Before You Begin

Before getting started, ensure you:

* Set up your MuleSoft environment. +
See xref:setup.adoc[] for more information.
* Created a basic structure for your API specification. +
See xref:design-api-specification.adoc[].
* Configured request and response data for your API specification. +
See xref:design-api-specification.adoc[].

== Review Changes in Files

Anypoint Code Builder highlights differences made in files since you last synced them with the main branch on Design Center.

When you change your API specification, the Source Control icon in the Activity Bar shows you an overview of how many changes you currently have. Selecting the icon shows you the details of your current changes:

* *Changes*
* *Staged Changes*

//TO-DO: Web IDE only because it contains hamburger menu. Need to make generic. Plus, take a SS in a lower resolution, or only a part of the screen. Hi-res SS are hard to read in a 13 inch display.
image::changes-and-staged-changes.png["Changes and Staged Changes highlighted in the source control section"]

To review your changes to your API specification:

. In Anypoint Code Builder, select your *Source Control* view (`ctrl+shift+G`).
. Open your `exchange.json` file.
. Review the working tree and see how deletions (red) and additions (green) are highlighted.
+
//TO-DO: Web IDE only because it contains hamburger menu. Need to make generic. Plus, take a SS in a lower resolution, or only a part of the screen. Hi-res SS are hard to read in a 13 inch display.
image::explore-changes-api-specification.png["exchange.json file highlighted to show the source control changes"]
+
In this case, you added some dependencies to the API by reusing API fragments you downloaded from Anypoint Exchange.

== Stage Your Changes Individually

The `git add` command adds a change from your working directory to the staging area. This command informs Git that you want to include updates to a particular file in the next commit. In Anypoint Code Builder you can do this by using the buttons in the UI:

. In Anypoint Code Builder, select your Source Control view.
. Select the plus icon in the `american-flight-api.raml` file.
+
//TO-DO: Web IDE only because it contains hamburger menu. Need to make generic. Plus, take a SS in a lower resolution, or only a part of the screen. Hi-res SS are hard to read in a 13 inch display.
image::stage-american-flights-api.png["Source control number and plus icon of american-flight-api.raml file highlighted"]
. Review the changes in the Source Control section. The file moves into *Staged Changes*.
+
//TO-DO: Web IDE only because it contains hamburger menu. Need to make generic. Plus, take a SS in a lower resolution, or only a part of the screen. Hi-res SS are hard to read in a 13 inch display.
image::staged-changes.png["Working tree of american-flight-api.raml file highlighted"]

Additionally, you can perform these actions using the command line. 

=== Stage Multiple Changes

You can add multiple files at the same time:

. In Anypoint Code Builder, select your Source Control view.
. Click the plus icon in the section header to stage the remaining changes.
+
//TO-DO: Web IDE only because it contains hamburger menu. Need to make generic.
image::stage-all-changes.png["Plus icon highlighted to stage all changes"]

Additionally, you can perform these actions using the embedded command line.

== Commit Changes

Use the `git commit` command to save the changes you staged to your local repository:

. In Anypoint Code Builder, select your Source Control view.
. Click in the message box.
. Enter a message that summarizes your changes.
+
//TO-DO: Web IDE only because it contains hamburger menu. Need to make generic.
image::add-commit-message.png["Message box highlighted"]
+
A good commit message helps summarize the changes across multiple files by multiple developers.
. Click the tick mark in the *Source Control* header to commit the changes.
+
//TO-DO: Web IDE only because it contains hamburger menu. Need to make generic.
image::commit-changes.png["Tick mark in the Source Control header highlighted"]
. Your Source Control view now shows no changes to commit.

== Push Changes to Anypoint Design Center

Use the `git push` command to upload your local content to Anypoint Design Center:

. In Anypoint Code Builder, select your Source Control view.
. Select the three dots that appear in the *Source Control* header.
. Select *Push*.
+
//TO-DO: Web IDE only because it contains hamburger menu. Need to make generic.
image::push-changes.png["Push command highlighted in the source control section"]

Your changes are now published in Design Center.

The integrated SCM within Anypoint Code Builder might prompt you to `periodically run 'git fetch'`. This option enables Anypoint Code Builder to check for updates of your API in Design Center and prompt you to update your local version of the API.

image::fetch-periodically-check.png["Periodically run git fetch message highlighted"]

== Next Step

* xref:publish-api-spec-to-exchange.adoc[Publish an API Specification to Exchange]. +
Publish your API specification to Exchange as a new asset and make it discoverable to your entire team.
