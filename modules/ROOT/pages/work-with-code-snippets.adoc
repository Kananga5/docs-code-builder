= Work with Code Snippets

Code snippets are reusable templates that simplify reusing code patterns, such as an insert operation from Database Connector, or logging messages and variables.

Anypoint Code Builder provides built-in snippets and enables you to create and save custom snippets.

Code Builder does not filter out snippets for code that goes outside a flow, such as connectors configurations.

== Built-In Snippets

Code Builder bundles a set of built-in snippets. To add a built-in snippet to your flow:

. Select the `plus` icon on your canvas to add a new component to your flow.
. Select _Snippets_:
+
image::select-snippet-overview.png[]
. Select _Built-in Snippets_:
+
image::built-in-snippets-overview.png[]
. Choose the snippet you want from the list of provided snippets.

Use the auto-complete feature when working on the XML editor to find any of the built-in snippets.

== Create a Snippet

Create and save reusable custom snippets to use in your project.

The snippets that you save are not available to others. Code Builder does not support sharing snippets with all users working on a project.

To create a snippet:

. Select the `plus` icon on your canvas to add a new component to your flow.
. Select _Snippets_:
+
image::select-snippet-overview.png[]
. Select _User Snippets_:
+
image::user-snippet-overview.png[]
. Select the `plus` icon:
+
image::create-user-snippet-overview.png[]
+
If you don't have other user snippets in your web IDE, Code Builder prompts you to create one.
+ 
Code Builder creates a new `mule-xml.json` snippet file with a sample snippet for you to edit.
. In the sample snippet file (`mule-xml.json`) Code Builder creates, uncomment all the fields after *Example*:
+
[source,JSON]
--
{
    // Example:
	 "Log a message": { //<1>
	 	"prefix": "log", //<2>
	 	"body": [ //<3>
	 		"<logger level=\"${1:INFO}\" message='$2' doc:name=\"Logger\" doc:id=\"$RANDOM_HEX\" />$0",
	 	],
	 	"description": "Log output to console" //<4>
	 }
}
--
<1> The first element in the XML is the text that displays in the list of user snippets.
<2> The `prefix` field is the trigger text for that snippet. Start typing the prefix and press `tab` in your XML editor to add the snippet using auto-complete.
<3> The `body` field is the actual code template that you can reuse.
<4> The `description` field is a description of the snippet.
. You can add other snippets to your `mule-xml.json` by adding new fields. For example:
+
[source,JSON]
--
{
    // Example:
	 "Log a message": {
	 	"prefix": "log",
	 	"body": [
	 		"<logger level=\"${1:INFO}\" message='$2' doc:name=\"Logger\" doc:id=\"$RANDOM_HEX\" />$0",
	 	],
	 	"description": "Log output to console"
	 },
        "Select first and last name from database": { //<1>
		"prefix": "select-name-from-db",
		"body": [
          "<db:select config-ref=\"${1:Database_Config}\" doc:name=\"${2:Select Contact from DB}\" doc:id=\"$RANDOM_HEX\" >",
          "<db:sql>",
          "<![CDATA[SELECT * FROM Contacts WHERE FirstName = :firstname AND LastName = :lastname]]>",
          "</db:sql>",
          "<db:input-parameters>",
            "<![CDATA[#[\{",
            "firstname: vars.firstnameVar,",
            "lastname: vars.lastnameVar",
            "\\}]]]>",
          "</db:input-parameters>",
          "</db:select>$0"
		],
		"description": "Pull first and last name from database"
	 }
}
--
<1> The previous sample shows a snippet for a Database Connector select operation that retrieves `firstName` and `lastName` values from a Database.
